(function initSplendidTextChange($){"use strict";var testNode=document.createElement("input");var isInputSupported=(testNode.oninput!==undefined&&((document.documentMode||100)>9));if(isInputSupported){$(document).on("input",function mirrorInputEvent(e){$(e.target).trigger("textchange");});return;}
var queueEventTargetForNotification=null;var activeElement=null;var notificationQueue=[];var watchedEvents="keyup keydown";function hasInputCapabilities(elem){return((elem.nodeName==="INPUT"&&(elem.type==="text"||elem.type==="password"))||elem.nodeName==="TEXTAREA");}
function installValueExtensionsOn(target){if(target.valueExtensions){return true;}
if(!hasInputCapabilities(target)){return false;}
target.valueExtensions={current:null};if(target.constructor&&target.constructor.prototype){var descriptor=Object.getOwnPropertyDescriptor(target.constructor.prototype,"value");Object.defineProperty(target,"value",{get:function(){return descriptor.get.call(this);},set:function(val){target.valueExtensions.current=val;descriptor.set.call(this,val);}});}
$(target).on("propertychange",queueEventTargetForNotification).on("dragend",function onSplendidDragend(e){window.setTimeout(function onSplendidDragendDelayed(){queueEventTargetForNotification(e);},0);});return true;}
function processNotificationQueue(){var q=notificationQueue;notificationQueue=[];var target,targetValue,i,l;for(i=0,l=q.length;i<l;i+=1){target=q[i];targetValue=target.value;if(target.valueExtensions.current!==targetValue){target.valueExtensions.current=targetValue;$(target).trigger("textchange");}}}
queueEventTargetForNotification=function queueEventTargetForNotification(e){var target=e.target;if(installValueExtensionsOn(target)&&target.valueExtensions.current!==target.value){var i,l;for(i=0,l=notificationQueue.length;i<l;i+=1){if(notificationQueue[i]===target){break;}}
if(i>=l){notificationQueue.push(target);if(l===0){window.setTimeout(processNotificationQueue,0);}}}};function startWatching(target){activeElement=target;$(activeElement).on(watchedEvents,queueEventTargetForNotification);}
function stopWatching(){if(activeElement){$(activeElement).off(watchedEvents,queueEventTargetForNotification);activeElement=null;}}
$(document).on("focusin",function onSplendidFocusin(e){stopWatching();if(installValueExtensionsOn(e.target)){startWatching(e.target);}}).on("focusout",stopWatching).on("input",queueEventTargetForNotification).on("selectionchange",function onSplendidSelectionChange(e){if(document.selection){var r=document.selection.createRange();if(r){var p=r.parentElement();if(p){e.target=p;queueEventTargetForNotification(e);}}}});}(jQuery));